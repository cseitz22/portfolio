<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Portfolio 8</title>

<script src="site_libs/header-attrs-2.19/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Portfolio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="p01.html">Portfolio 1</a>
</li>
<li>
  <a href="p02.html">Portfolio 2</a>
</li>
<li>
  <a href="p03.html">Portfolio 3</a>
</li>
<li>
  <a href="p04.html">Portfolio 4</a>
</li>
<li>
  <a href="p05.html">Portfolio 5</a>
</li>
<li>
  <a href="p06.html">Portfolio 6</a>
</li>
<li>
  <a href="p07.html">Portfolio 7</a>
</li>
<li>
  <a href="p08.html">Portfolio 8</a>
</li>
<li>
  <a href="p09.html">Portfolio 9</a>
</li>
<li>
  <a href="p10.html">Portfolio 10</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Portfolio 8</h1>
<h4 class="date">3.21.2023</h4>

</div>


<p>The goal of this portfolio is to examine part of my thesis data. To
recap, my thesis is examining distractor suppression in children and
adults. Participants are shown a distractor in a location more
frequently than other locations in a visual search array. Based on
previous studies, we would expect adults to suppress their attention to
the high-probability location, but we were unsure when in development
children develop this ability.</p>
<pre class="r"><code>library(tidyverse) 
library(tidyr)
library(rstatix)
library(data.table)
library(afex)
library(emmeans)
library(psych)
library(ggprism)
library(patchwork)
library(magrittr)
library(cowplot)</code></pre>
<p>I put all the messy loading in of different data sets and adding in
important columns to an R script instead of having it here.</p>
<div id="trim-the-data" class="section level3">
<h3>Trim the Data</h3>
<p>Calculate the overall means and standard deviations for each age
group to determine the cutoff for response times.</p>
<pre class="r"><code>aggregate(rt ~ acc, data = adults, FUN = mean)</code></pre>
<pre><code>##   acc       rt
## 1   0 1036.116
## 2   1 1126.754</code></pre>
<pre class="r"><code>aggregate(rt ~ acc, data = adults, FUN = sd)</code></pre>
<pre><code>##   acc       rt
## 1   0 610.4570
## 2   1 668.7103</code></pre>
<pre class="r"><code>aggregate(rt ~ acc, data = kids12, FUN = mean)</code></pre>
<pre><code>##   acc        rt
## 1   0  851.4179
## 2   1 2130.8040</code></pre>
<pre class="r"><code>aggregate(rt ~ acc, data = kids12, FUN = sd)</code></pre>
<pre><code>##   acc       rt
## 1   0 1357.789
## 2   1 2727.995</code></pre>
<pre class="r"><code>aggregate(rt ~ acc, data = kids6, FUN = mean)</code></pre>
<pre><code>##   acc        rt
## 1   0  201.1421
## 2   1 3112.2998</code></pre>
<pre class="r"><code>aggregate(rt ~ acc, data = kids6, FUN = sd)</code></pre>
<pre><code>##   acc        rt
## 1   0  951.0326
## 2   1 3594.9864</code></pre>
<p>Define trimming criteria according to Van Selst and Jolicoeur
1994.</p>
<pre class="r"><code>xsize &lt;- c(4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 20, 
             25, 30, 35, 50, 100)
stds &lt;- c(1.458, 1.68, 1.841, 1.961, 2.05, 2.12, 2.173, 
            2.22, 2.246, 2.274, 2.31, 2.326, 2.391, 2.41, 2.4305, 
            2.45, 2.48, 2.5)</code></pre>
<p>Trim the data and compute the percent trimmed</p>
<pre class="r"><code>trimmedA &lt;- adults[adults$acc==1, ] %&gt;% group_by(id, relative_hp_dist) %&gt;%
           mutate(sdc = ifelse(length(rt)&gt;=100,2.5,approx(xsize,stds,xout=length(rt))$y), avg = mean(rt), stdev = sd(rt)) %&gt;%
           filter(rt &lt;= sdc*stdev+avg &amp; rt &gt;=avg-(sdc*stdev) &amp; rt &gt;=200 &amp; rt&lt;=2500) %&gt;% #exact upper limit =2464.175
           select(id, age, relative_hp_dist, rt, block_num) %&gt;%  #keep these columns in the new data frame
           as.data.frame()


statPrep &lt;- trimmedA %&gt;% group_by(id, relative_hp_dist) %&gt;% summarise(measurement=mean(rt)) %&gt;% as.data.frame()</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;id&#39;. You can override using the `.groups`
## argument.</code></pre>
<pre class="r"><code>100-(nrow(trimmedA)/nrow(adults[adults$acc==1, ]))*100</code></pre>
<pre><code>## [1] 5.100756</code></pre>
<p>5.10% of trials were trimmed from the adult data set.</p>
<pre class="r"><code>trimmedC12 &lt;- kids12[kids12$acc==1, ] %&gt;% group_by(id, relative_hp_dist) %&gt;%
           mutate(sdc = ifelse(length(rt)&gt;=100,2.5,approx(xsize,stds,xout=length(rt))$y), avg = mean(rt), stdev = sd(rt)) %&gt;%
           filter(rt &lt;= sdc*stdev+avg &amp; rt &gt;=avg-(sdc*stdev) &amp; rt &gt;=200 &amp; rt&lt;=7590) %&gt;%  #exact upper limit =7586.794
           select(id, age1, relative_hp_dist, rt, block_num1) %&gt;%  #keep these columns in the new data frame
           as.data.frame()


statPrep &lt;- trimmedC12 %&gt;% group_by(id, relative_hp_dist) %&gt;% summarise(measurement=mean(rt)) %&gt;% as.data.frame()</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;id&#39;. You can override using the `.groups`
## argument.</code></pre>
<pre class="r"><code>100-(nrow(trimmedC12)/nrow(kids12[kids12$acc==1, ]))*100</code></pre>
<pre><code>## [1] 4.639738</code></pre>
<p>4.64% of trials were trimmed from the older child data set.</p>
<pre class="r"><code>trimmedC6 &lt;- kids6[kids6$acc==1, ] %&gt;% group_by(id, relative_hp_dist) %&gt;%
           mutate(sdc = ifelse(length(rt)&gt;=100,2.5,approx(xsize,stds,xout=length(rt))$y), avg = mean(rt), stdev = sd(rt)) %&gt;%
           filter(rt &lt;= sdc*stdev+avg &amp; rt &gt;=avg-(sdc*stdev) &amp; rt &gt;=200 &amp; rt&lt;=18950) %&gt;% #exact upper limit =18929.79
           select(id, age2, relative_hp_dist, rt, block_num2) %&gt;%  #keep these columns in the new data frame
           as.data.frame()


statPrep &lt;- trimmedC6 %&gt;% group_by(id, relative_hp_dist) %&gt;% summarise(measurement=mean(rt)) %&gt;% as.data.frame()</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;id&#39;. You can override using the `.groups`
## argument.</code></pre>
<pre class="r"><code>100-(nrow(trimmedC6)/nrow(kids6[kids6$acc==1, ]))*100</code></pre>
<pre><code>## [1] 5.181347</code></pre>
<p>6.07% of trials were trimmed from the younger child data set.</p>
</div>
<div id="response-time-anova-for-3-conditions-and-2-ages"
class="section level3">
<h3>Response Time ANOVA for 3 conditions and 2 ages</h3>
<p>Change the block number name to be the same for each age group.</p>
<pre class="r"><code>trimmedC12&lt;- trimmedC12 %&gt;%
  rename(
    block_num=block_num1,
    age=age1
  )

trimmedC6&lt;- trimmedC6 %&gt;%
  rename(
    block_num=block_num2,
    age=age2
  )</code></pre>
<p>Combine the adults and older children to a single df.</p>
<pre class="r"><code>all_data &lt;- rbind(trimmedA, trimmedC12)</code></pre>
<p>Create a new data frame with the average RT for each relative
distractor location per participant, so we can do a repeated measures
ANOVA – eventually – maybe.</p>
<pre class="r"><code>space &lt;- all_data %&gt;%
  group_by(age, id, relative_hp_dist) %&gt;%
  summarize(rts = mean(rt)
            )</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;age&#39;, &#39;id&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre class="r"><code>space</code></pre>
<pre><code>## # A tibble: 165 × 4
## # Groups:   age, id [33]
##    age      id relative_hp_dist   rts
##    &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;
##  1 adult    14 absent            762.
##  2 adult    14 high_prob         840.
##  3 adult    14 lp_1             1033.
##  4 adult    14 lp_2              903.
##  5 adult    14 lp_3              851.
##  6 adult    15 absent            779.
##  7 adult    15 high_prob         936.
##  8 adult    15 lp_1             1060.
##  9 adult    15 lp_2              942.
## 10 adult    15 lp_3             1112.
## # … with 155 more rows</code></pre>
<p>Run ANOVA on 3 conditions first, and if significant, then run in on 5
conditions?</p>
<p>Need to reformat the above df to have a column for each
relative_hp_dist/ID so we can average across low-probability
locations.</p>
<pre class="r"><code>space_anova &lt;- setDT(space)
space_anova &lt;- dcast(space_anova,id+age~relative_hp_dist,value.var=&#39;rts&#39;)</code></pre>
<pre class="r"><code>space_anova &lt;- space_anova %&gt;%
  mutate(low_prob = (lp_1+lp_2+lp_3)/3)</code></pre>
<p>Now, I want to create a smaller graph with just 3 bars: one for the
high-probability rts, average of low-probability rts, and no
distractor.</p>
<pre class="r"><code>df_mod &lt;- subset(space_anova, select=c(id, age, high_prob, absent, low_prob))

df_mod &lt;- reshape2::melt(df_mod, id.var=c(&#39;id&#39;, &#39;age&#39;), variable.name= &quot;relative_hp_dist&quot;)</code></pre>
<p>Setting up the data to plot by calculating the mean and standard
error based on the number of ppts in that group.</p>
<pre class="r"><code>sum_stats &lt;- df_mod%&gt;%
  group_by(age, relative_hp_dist)%&gt;%
  summarize(mean_rts=mean(value),
            sd_rt=sd(value),
            n_rt=n(),
            se=sd_rt/sqrt(n_rt),
            upper_limit=mean_rts+se,
            lower_limit=mean_rts-se
  )</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;age&#39;. You can override using the `.groups`
## argument.</code></pre>
<pre class="r"><code>sum_stats</code></pre>
<pre><code>## # A tibble: 6 × 8
## # Groups:   age [2]
##   age   relative_hp_dist mean_rts sd_rt  n_rt    se upper_limit lower_limit
##   &lt;chr&gt; &lt;fct&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1 adult high_prob           1099.  269.    27  51.8       1151.       1048.
## 2 adult absent               970.  233.    27  44.9       1015.        925.
## 3 adult low_prob            1130.  249.    27  47.8       1178.       1083.
## 4 child high_prob           1827.  676.     6 276.        2103.       1551.
## 5 child absent              1639.  612.     6 250.        1889.       1389.
## 6 child low_prob            2044.  850.     6 347.        2391.       1697.</code></pre>
<p>Use the following code to change the order of the bars manually.</p>
<pre class="r"><code>sum_stats$relative_hp_dist &lt;- factor(sum_stats$relative_hp_dist,              # Change ordering manually
                  levels = c(&quot;high_prob&quot;, &quot;low_prob&quot;, &quot;absent&quot;))</code></pre>
<p>Plot data.</p>
<pre class="r"><code>supp.labs &lt;- c(&quot;Adults&quot;, &quot;Children&quot;)
names(supp.labs) &lt;- c(&quot;adult&quot;, &quot;child&quot;)

a&lt;-ggplot(subset(sum_stats, age %in% c(&quot;adult&quot;)),aes(x = relative_hp_dist, y = mean_rts, fill=relative_hp_dist)) +
  geom_bar(stat = &quot;identity&quot;, show.legend = FALSE)+
  geom_errorbar(aes(ymin=lower_limit, ymax=upper_limit), width=0.2)+
  coord_cartesian(ylim = c(800, 1200))+ 
  #facet_grid(~age, scales=&quot;free&quot;, labeller = labeller(age=supp.labs)) +
  theme_classic()+
  theme(axis.text=element_text(size=30),
        axis.title=element_text(size=40,face=&quot;bold&quot;),
        title = element_text(size = 45)) +
  labs(x = &quot;Distractor Location&quot;, y = &quot;Response Time (ms)&quot;)+
  labs(title= &quot;Singleton Distractor Present&quot;,subtitle = &quot;Adults&quot;, tag = &quot;A&quot;)+
  scale_fill_brewer(palette=&quot;Dark2&quot;)+
  scale_x_discrete(labels= c(&quot;high_prob&quot;=&quot;HP loc&quot;,&quot;low_prob&quot;=&quot;LP loc&quot;,&quot;absent&quot;=&quot;Absent&quot;))

b&lt;-ggplot(subset(sum_stats, age %in% c(&quot;child&quot;)),aes(x = relative_hp_dist, y = mean_rts, fill=relative_hp_dist)) +
  geom_bar(stat = &quot;identity&quot;, show.legend = FALSE)+
  geom_errorbar(aes(ymin=lower_limit, ymax=upper_limit), width=0.2)+
  coord_cartesian(ylim = c(1200, 2500))+ 
  #facet_grid(~age, scales=&quot;free&quot;, labeller = labeller(age=supp.labs)) +
  theme_classic()+
  theme(axis.text=element_text(size=30),
        axis.title=element_text(size=40,face=&quot;bold&quot;),
        title = element_text(size = 45)) +
  labs(x = &quot;Distractor Location&quot;, y = &quot;Response Time (ms)&quot;)+
  labs(title = &quot;  &quot;, subtitle = &quot;Children&quot;, tag = &quot; &quot;)+
  scale_fill_brewer(palette=&quot;Dark2&quot;)+
  scale_x_discrete(labels= c(&quot;high_prob&quot;=&quot;HP loc&quot;,&quot;low_prob&quot;=&quot;LP loc&quot;,&quot;absent&quot;=&quot;Absent&quot;))

plot_grid(a, b, align=c(&quot;hv&quot;), label_size=40) </code></pre>
<p><img src="p08_files/figure-html/plot-first-1.png" width="2304" /></p>
<p>Run a 3x2 mixed design ANOVA with distractor location and age as
independent variables and rt as the dependent variable.</p>
<pre class="r"><code>model3 &lt;- aov_car(value ~ age*relative_hp_dist + Error(id/relative_hp_dist), data=df_mod)</code></pre>
<pre><code>## Converting to factor: age</code></pre>
<pre><code>## Contrasts set to contr.sum for the following variables: age</code></pre>
<pre class="r"><code>model3</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: value
##                 Effect          df       MSE         F  ges p.value
## 1                  age       1, 31 395159.04 22.11 *** .408   &lt;.001
## 2     relative_hp_dist 1.72, 53.22   8023.81 57.19 *** .059   &lt;.001
## 3 age:relative_hp_dist 1.72, 53.22   8023.81 11.58 *** .012   &lt;.001
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1
## 
## Sphericity correction method: GG</code></pre>
<p>The effect of age was significant F(1,31)=8, p=.008.The effect of
distractor location was significant, F(2, 62)= 25.2, p&lt;.001. The
interaction was significant, F(2,62)=4.28, p=.025.</p>
</div>
<div id="separate-anova-for-just-adults" class="section level3">
<h3>Separate ANOVA for just adults</h3>
<pre class="r"><code>spaceA &lt;- trimmedA %&gt;%
  group_by(id, relative_hp_dist) %&gt;%
  summarize(rts = mean(rt)
            )</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;id&#39;. You can override using the `.groups`
## argument.</code></pre>
<p>Run ANOVA on 3 conditions first, and if significant, then run in on 5
conditions?</p>
<p>Need to reformat the above df to have a column for each
relative_hp_dist/ID so we can average across low-probability
locations.</p>
<pre class="r"><code>space_anovaA &lt;- setDT(spaceA)
space_anovaA &lt;- dcast(space_anovaA,id~relative_hp_dist,value.var=&#39;rts&#39;)</code></pre>
<pre class="r"><code>space_anovaA &lt;- space_anovaA %&gt;%
  mutate(low_prob = (lp_1+lp_2+lp_3)/3)</code></pre>
<p>Now, I want to create a smaller graph with just 3 bars: one for the
high-probability rts, average of low-probability rts, and no
distractor.</p>
<pre class="r"><code>df_modA &lt;- subset(space_anovaA, select=c(id, high_prob, absent, low_prob))

df_modA &lt;- reshape2::melt(df_modA, id.var=c(&#39;id&#39;), variable.name= &quot;relative_hp_dist&quot;)</code></pre>
<pre class="r"><code>modelA &lt;- aov_car(value ~ relative_hp_dist + Error(id/relative_hp_dist), data=df_modA)

modelA</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: value
##             Effect          df     MSE         F  ges p.value
## 1 relative_hp_dist 1.87, 48.49 3661.44 57.25 *** .074   &lt;.001
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1
## 
## Sphericity correction method: GG</code></pre>
<p>There is a difference in rt when presenting the distractor in
different locations, F(2,52)=57.25, p&lt;.001.</p>
<p>Run t-tests to determine significant differences between conditions
with Holm-Bonferroni correction.</p>
<pre class="r"><code>df_modA %&gt;%
  pairwise_t_test(
    value ~ relative_hp_dist, paired = TRUE,
    p.adjust.method = &quot;holm&quot;
    )</code></pre>
<pre><code>## # A tibble: 3 × 10
##   .y.   group1    group2      n1    n2 statistic    df        p    p.adj p.adj…¹
## * &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  
## 1 value high_prob absent      27    27      7.44    26 6.76e- 8 1.35e- 7 ****   
## 2 value high_prob low_prob    27    27     -2.28    26 3.1 e- 2 3.1 e- 2 *      
## 3 value absent    low_prob    27    27     -9.79    26 3.3 e-10 9.9 e-10 ****   
## # … with abbreviated variable name ¹​p.adj.signif</code></pre>
</div>
<div id="separate-anova-for-just-kids" class="section level3">
<h3>Separate ANOVA for just kids</h3>
<pre class="r"><code>spaceK &lt;- trimmedC12 %&gt;%
  group_by(id,relative_hp_dist) %&gt;%
  summarize(rts = mean(rt)
            )</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;id&#39;. You can override using the `.groups`
## argument.</code></pre>
<p>Run ANOVA on 3 conditions first, and if significant, then run in on 5
conditions?</p>
<p>Need to reformat the above df to have a column for each
relative_hp_dist/ID so we can average across low-probability
locations.</p>
<pre class="r"><code>space_anovaK &lt;- setDT(spaceK)
space_anovaK &lt;- dcast(space_anovaK,id~relative_hp_dist,value.var=&#39;rts&#39;)</code></pre>
<pre class="r"><code>space_anovaK &lt;- space_anovaK %&gt;%
  mutate(low_prob = (lp_1+lp_2+lp_3)/3)</code></pre>
<p>Now, I want to create a smaller graph with just 3 bars: one for the
high-probability rts, average of low-probability rts, and no
distractor.</p>
<pre class="r"><code>df_modK &lt;- subset(space_anovaK, select=c(id,high_prob, absent, low_prob))

df_modK &lt;- reshape2::melt(df_modK, id.var=c(&#39;id&#39;), variable.name= &quot;relative_hp_dist&quot;)</code></pre>
<pre class="r"><code>modelK &lt;- aov_car(value ~ relative_hp_dist + Error(id/relative_hp_dist), data=df_modK)

modelK</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: value
##             Effect         df      MSE      F  ges p.value
## 1 relative_hp_dist 1.37, 6.83 36522.69 9.86 * .060    .013
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1
## 
## Sphericity correction method: GG</code></pre>
<p>Again, run pairwise t-tests to find differences between conditions
with Holm-Bonferroni corrections.</p>
<pre class="r"><code>df_modK %&gt;%
  pairwise_t_test(
    value ~ relative_hp_dist, paired = TRUE,
    p.adjust.method = &quot;holm&quot;
    )</code></pre>
<pre><code>## # A tibble: 3 × 10
##   .y.   group1    group2      n1    n2 statistic    df     p p.adj p.adj.signif
## * &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       
## 1 value high_prob absent       6     6      2.91     5 0.033 0.066 ns          
## 2 value high_prob low_prob     6     6     -2.58     5 0.05  0.066 ns          
## 3 value absent    low_prob     6     6     -3.45     5 0.018 0.055 ns</code></pre>
<pre class="r"><code>ggplot(all_data, aes(relative_hp_dist, rt, fill=relative_hp_dist)) +
  geom_bar(stat=&quot;summary&quot;, fun.y=&quot;mean&quot;, position=&quot;dodge&quot;) + 
  facet_grid(.~age) +
  xlab(&quot;Distractor Location&quot;) + ylab(&quot;Response Times (ms)&quot;) +
  scale_fill_brewer(palette=&quot;Dark2&quot;) +
  theme(legend.position=&quot;none&quot;)</code></pre>
<pre><code>## Warning in geom_bar(stat = &quot;summary&quot;, fun.y = &quot;mean&quot;, position = &quot;dodge&quot;):
## Ignoring unknown parameters: `fun.y`</code></pre>
<pre><code>## No summary function supplied, defaulting to `mean_se()`
## No summary function supplied, defaulting to `mean_se()`</code></pre>
<p><img src="p08_files/figure-html/plot-2-1.png" width="672" /></p>
</div>
<div id="examine-normalized-rts" class="section level3">
<h3>Examine normalized rts</h3>
<p>Output df to create normalized df because I thought it would be
easier to do in excel for now.</p>
<pre class="r"><code>write.csv(df_mod, &quot;norm_data.csv&quot;, row.names=FALSE)</code></pre>
<p>Bring back in df with the normalized RTs for each ppt.</p>
<pre class="r"><code>normrt &lt;- read_csv(&quot;norm_data_new.csv&quot;, show_col_types = FALSE)</code></pre>
<pre><code>## New names:
## • `id` -&gt; `id...1`
## • `` -&gt; `...6`
## • `` -&gt; `...7`
## • `id` -&gt; `id...8`</code></pre>
<pre class="r"><code>normrt&lt;- subset(normrt, select=c(id...1, age, relative_hp_dist, norm))</code></pre>
<p>Run an ANOVA on the normalized data.</p>
<pre class="r"><code>model_norm &lt;- aov_car(norm ~ age*relative_hp_dist + Error(id...1/relative_hp_dist), data=normrt)</code></pre>
<pre><code>## Converting to factor: age</code></pre>
<pre><code>## Contrasts set to contr.sum for the following variables: age</code></pre>
<pre class="r"><code>model_norm</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: norm
##                 Effect          df  MSE         F   ges p.value
## 1                  age       1, 31 0.00      0.24 &lt;.001    .627
## 2     relative_hp_dist 1.92, 59.67 0.00 55.02 ***  .640   &lt;.001
## 3 age:relative_hp_dist 1.92, 59.67 0.00      2.34  .070    .107
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1
## 
## Sphericity correction method: GG</code></pre>
<pre class="r"><code>reform &lt;- setDT(normrt)
reform &lt;- dcast(reform,id...1+age~relative_hp_dist,value.var=&#39;norm&#39;)</code></pre>
<p>Run pairwise t-tests with Holm-Bonferroni correction.</p>
<pre class="r"><code>normrt %&gt;%
  pairwise_t_test(
    norm ~ relative_hp_dist, paired = TRUE,
    p.adjust.method = &quot;holm&quot;
    )</code></pre>
<pre><code>## # A tibble: 3 × 10
##   .y.   group1    group2       n1    n2 statis…¹    df        p    p.adj p.adj…²
## * &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;int&gt; &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  
## 1 norm  absent    high_prob    33    33    -8.40    32 1.34e- 9 2.68e- 9 ****   
## 2 norm  absent    low_prob     33    33   -11.2     32 1.38e-12 4.14e-12 ****   
## 3 norm  high_prob low_prob     33    33    -3.69    32 8.19e- 4 8.19e- 4 ***    
## # … with abbreviated variable names ¹​statistic, ²​p.adj.signif</code></pre>
<p>Set up normalized data plot.</p>
<pre class="r"><code>sum_stats_norm &lt;- normrt%&gt;%
  group_by(relative_hp_dist)%&gt;%
  summarize(mean_rts=mean(norm),
            sd_rt=sd(norm),
            n_rt=n(),
            se=sd_rt/sqrt(n_rt),
            upper_limit=mean_rts+se,
            lower_limit=mean_rts-se
  )
sum_stats_norm</code></pre>
<pre><code>## # A tibble: 3 × 7
##   relative_hp_dist mean_rts  sd_rt  n_rt      se upper_limit lower_limit
##   &lt;chr&gt;               &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1 absent              0.907 0.0486    33 0.00845       0.915       0.898
## 2 high_prob           1.02  0.0427    33 0.00744       1.03        1.02 
## 3 low_prob            1.07  0.0456    33 0.00795       1.08        1.06</code></pre>
<pre class="r"><code>sum_stats_norm$relative_hp_dist &lt;- factor(sum_stats_norm$relative_hp_dist,              # Change ordering manually
                  levels = c(&quot;high_prob&quot;, &quot;low_prob&quot;, &quot;absent&quot;))</code></pre>
<p>Plot data.</p>
<pre class="r"><code>a&lt;-ggplot(data = sum_stats_norm, aes(x = relative_hp_dist, y = mean_rts, fill=relative_hp_dist)) +
  geom_bar(stat = &quot;identity&quot;, show.legend = FALSE)+
  geom_errorbar(aes(ymin=lower_limit, ymax=upper_limit), width=0.2)+
  coord_cartesian(ylim = c(.85,1.1))+ 
  theme_classic()+
  theme(axis.text=element_text(size=30),
        axis.title=element_text(size=40,face=&quot;bold&quot;),
        title = element_text(size = 40),
        strip.text.x = element_text(size=30)) +
  labs(x = &quot;Distractor Location&quot;, y = &quot;Normalized Response Time (%)&quot;)+
  labs(title = &quot;Singleton Distractor Present&quot;)+
  scale_fill_brewer(palette=&quot;Dark2&quot;) +
  scale_x_discrete(labels= c(&quot;high_prob&quot;=&quot;HP loc&quot;,&quot;low_prob&quot;=&quot;LP loc&quot;,&quot;absent&quot;=&quot;Absent&quot;))

plot_grid(a,labels = c(&#39;A&#39;), label_size=40)</code></pre>
<p><img src="p08_files/figure-html/plot-first-norm-1.png" width="2112" /></p>
</div>
<div id="examine-block-by-block-learning-of-distractor-location"
class="section level3">
<h3>Examine block-by-block learning of distractor location</h3>
<p>The goal of this section is to examine individual blocks of trials
for learning. I’ll be taking the difference between response times when
the distractor is presented in the low probability locations and
response times when the distractor is presented in the high probability
location in each block to see roughly how quickly individuals are
learning the regularity.</p>
<pre class="r"><code>space_block &lt;- all_data %&gt;%
  group_by(id, age, block_num, relative_hp_dist) %&gt;%
  summarize(rts = mean(rt),
            )</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;id&#39;, &#39;age&#39;, &#39;block_num&#39;. You can override
## using the `.groups` argument.</code></pre>
<pre class="r"><code>space_block</code></pre>
<pre><code>## # A tibble: 966 × 5
## # Groups:   id, age, block_num [195]
##       id age   block_num relative_hp_dist   rts
##    &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;
##  1    14 adult         1 absent            966.
##  2    14 adult         1 high_prob        1026.
##  3    14 adult         1 lp_1             1173.
##  4    14 adult         1 lp_2             1009.
##  5    14 adult         1 lp_3             1072.
##  6    14 adult         2 absent            770.
##  7    14 adult         2 high_prob         895.
##  8    14 adult         2 lp_1             1169.
##  9    14 adult         2 lp_2             1020.
## 10    14 adult         2 lp_3              923.
## # … with 956 more rows</code></pre>
<pre class="r"><code>space_block &lt;- setDT(space_block)
space_block &lt;- dcast(space_block,id+age+block_num~relative_hp_dist,value.var=&#39;rts&#39;)</code></pre>
<p>Below, I added the average rt for the low probability locations and
the difference between the low probability and high probability
locations ignoring n/a values.</p>
<pre class="r"><code>space_block &lt;- space_block %&gt;%
  mutate(low_prob = rowMeans(select(space_block, c(lp_1,lp_2,lp_3)),na.rm=TRUE)) %&gt;%
  mutate(difference = (low_prob-high_prob))</code></pre>
<pre class="r"><code>space_block%&gt;%
  group_by(id)%&gt;%
  summarize(supp = mean(difference),
            )</code></pre>
<pre><code>## # A tibble: 33 × 2
##       id  supp
##    &lt;dbl&gt; &lt;dbl&gt;
##  1    14  95.2
##  2    15  99.7
##  3    16  65.3
##  4    18  51.7
##  5    19  50.3
##  6    20  43.6
##  7    21  83.5
##  8    22 123. 
##  9    23 -84.9
## 10    24 -76.6
## # … with 23 more rows</code></pre>
<pre class="r"><code>ggplot(data = space_block,aes(x=block_num, y=difference, group=id))+
  geom_line(aes(color=age))+
  labs(title = &quot;Difference in Response Times&quot;, subtitle = &quot;for distractor presentation at the low-probability locations and high-probability location by block&quot;)+
  theme_classic()+
  labs(x = &quot;Block Number&quot;, y = &quot;Difference in RT (ms)&quot;)</code></pre>
<p><img src="p08_files/figure-html/line_plot-1.png" width="672" /></p>
<p>Positive differences indicate that participants were faster when the
distractor was presented in the high probability location compared to
when it was presented in the low probability locations. The average
across all participants is plotted below. These results indicate that
the individuals are learning within the first block where the distractor
is likely to appear.</p>
<pre class="r"><code>space2 &lt;- space_block %&gt;%
  group_by(age, block_num) %&gt;%
  summarize(rts = mean(difference, na.rm = TRUE),
            sd_rt=sd(difference, na.rm = TRUE),
            n_rt=n(),
            se=sd_rt/sqrt(n_rt),
            upper_limit=rts+se,
            lower_limit=rts-se
            )</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;age&#39;. You can override using the `.groups`
## argument.</code></pre>
<pre class="r"><code>space2</code></pre>
<pre><code>## # A tibble: 12 × 8
## # Groups:   age [2]
##    age   block_num     rts sd_rt  n_rt    se upper_limit lower_limit
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
##  1 adult         1 -24.6    225.    27  43.3        18.7      -67.9 
##  2 adult         2  -0.743  213.    27  41.0        40.3      -41.7 
##  3 adult         3  90.2    162.    27  31.3       122.        59.0 
##  4 adult         4  68.0    131.    27  25.2        93.2       42.9 
##  5 adult         5  19.0    161.    27  31.0        50.0      -12.0 
##  6 adult         6  33.4    160.    27  30.8        64.3        2.61
##  7 child         1  36.7    223.     6  91.2       128.       -54.6 
##  8 child         2 252.     544.     6 222.        474.        30.1 
##  9 child         3 292.     144.     6  58.6       350.       233.  
## 10 child         4  95.2    201.     5  90.0       185.         5.22
## 11 child         5 353.     346.     5 155.        507.       198.  
## 12 child         6 358.     234.     5 105.        462.       253.</code></pre>
<pre class="r"><code>ggplot(data = space2,aes(x=block_num, y=rts))+
  geom_line(aes(color=age, linewidth=1))+
  geom_point()+
  geom_errorbar(aes(ymin=lower_limit, ymax=upper_limit), width=0.2)+
  labs(title = &quot;Raw RTs&quot;)+
  xlab(&quot;Block number&quot;)+
  ylab(expression(atop(&quot;Suppression effect (ms)&quot;, paste(&quot;(low prob. - high prob.)&quot;))))+
  theme(axis.text=element_text(size=30),
        axis.title=element_text(size=40,face=&quot;bold&quot;),
        title = element_text(size = 45),
        legend.text=element_text(size = 30))+
  guides(linewidth=&quot;none&quot;)</code></pre>
<p><img src="p08_files/figure-html/line_plot_avg-1.png" width="2112" /></p>
<p>Run ANOVA to test whether the suppression effect changes depending on
the block (i.e. increases with more trials).</p>
<pre class="r"><code>model4 &lt;- aov_car(difference ~ age*block_num + Error(id/block_num), data=space_block)</code></pre>
<pre><code>## Converting to factor: age</code></pre>
<pre><code>## Warning: Missing values for following ID(s):
## 26
## Removing those cases from the analysis.</code></pre>
<pre><code>## Contrasts set to contr.sum for the following variables: age</code></pre>
<pre class="r"><code>model4</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: difference
##          Effect          df      MSE         F  ges p.value
## 1           age       1, 30 59087.64 19.76 *** .139   &lt;.001
## 2     block_num 3.30, 99.11 55381.66    3.08 * .072    .027
## 3 age:block_num 3.30, 99.11 55381.66    2.65 * .063    .048
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1
## 
## Sphericity correction method: GG</code></pre>
<p>Maybe will need to separate out by age and see if suppression effect
by block is significant.</p>
<pre class="r"><code>block_adult &lt;- space_block %&gt;%
  filter(age==&quot;adult&quot;)

model5 &lt;- aov_car(difference ~ block_num + Error(id/block_num), data=block_adult)

model5</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: difference
##      Effect          df      MSE    F  ges p.value
## 1 block_num 3.67, 95.44 43911.34 1.53 .047    .204
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1
## 
## Sphericity correction method: GG</code></pre>
<pre class="r"><code>block_child &lt;- space_block %&gt;%
  filter(age==&quot;child&quot;)

model6 &lt;- aov_car(difference ~ block_num + Error(id/block_num), data=block_child)</code></pre>
<pre><code>## Warning: Missing values for following ID(s):
## 26
## Removing those cases from the analysis.</code></pre>
<pre class="r"><code>model6</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: difference
##      Effect    df      MSE    F  ges p.value
## 1 block_num 5, 20 64904.70 1.77 .201    .164
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1
## 
## Sphericity correction method: GG</code></pre>
<p>Exmined the noramlized suppression effect by block.</p>
<pre class="r"><code>write.csv(space_block, &quot;space_block.csv&quot;, row.names=FALSE)</code></pre>
<pre class="r"><code>normy &lt;- read_csv(&quot;space_block_norm.csv&quot;, show_col_types = FALSE)
normy&lt;- subset(normy, select=c(id, age, block_num, diff_norm))</code></pre>
<p>Run ANOVA test to determine if there is a difference in the
suppression effect by block.</p>
<pre class="r"><code>aov_car(diff_norm ~ age*block_num + Error(id/block_num), data=normy)</code></pre>
<pre><code>## Converting to factor: age</code></pre>
<pre><code>## Contrasts set to contr.sum for the following variables: age</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: diff_norm
##          Effect           df  MSE      F  ges p.value
## 1           age        1, 31 0.05 3.55 + .016    .069
## 2     block_num 3.26, 101.10 0.09   1.32 .035    .272
## 3 age:block_num 3.26, 101.10 0.09   1.23 .033    .302
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1
## 
## Sphericity correction method: GG</code></pre>
<p>Not sure why I did this but combine adults and children for examining
suppression effect by block.</p>
<pre class="r"><code>aov_car(diff_norm ~ block_num + Error(id/block_num), data=normy)</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: diff_norm
##      Effect           df  MSE    F  ges p.value
## 1 block_num 3.29, 105.33 0.09 1.27 .033    .288
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1
## 
## Sphericity correction method: GG</code></pre>
<p>Plot the normalized response times by block.</p>
<pre class="r"><code>ggplot(data = normy,aes(x=block_num, y=diff_norm, group=id))+
  geom_line(aes(color=age))+
  labs(title = &quot;Difference in Response Times&quot;, subtitle = &quot;for distractor presentation at the low-probability locations and high-probability location by block&quot;)+
  theme_classic()+
  labs(x = &quot;Block Number&quot;, y = &quot;Difference in RT (ms)&quot;)</code></pre>
<p><img src="p08_files/figure-html/line_plot-norm-block-1.png" width="672" /></p>
<pre class="r"><code>space_norm &lt;- normy %&gt;%
  group_by(age, block_num) %&gt;%
  summarize(rts = mean(diff_norm, na.rm = TRUE),
            sd_rt=sd(diff_norm, na.rm = TRUE),
            n_rt=n(),
            se=sd_rt/sqrt(n_rt),
            upper_limit=rts+se,
            lower_limit=rts-se
            )</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;age&#39;. You can override using the `.groups`
## argument.</code></pre>
<pre class="r"><code>space_norm</code></pre>
<pre><code>## # A tibble: 12 × 8
## # Groups:   age [2]
##    age   block_num       rts sd_rt  n_rt     se upper_limit lower_limit
##    &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
##  1 adult         1 -0.00115  0.195    27 0.0376   0.0364        -0.0387
##  2 adult         2  0.0342   0.322    27 0.0619   0.0961        -0.0276
##  3 adult         3 -0.0680   0.200    27 0.0385  -0.0294        -0.106 
##  4 adult         4 -0.0688   0.121    27 0.0234  -0.0455        -0.0922
##  5 adult         5 -0.0375   0.195    27 0.0375   0.0000351     -0.0750
##  6 adult         6 -0.112    0.317    27 0.0609  -0.0508        -0.173 
##  7 child         1 -0.0639   0.104     6 0.0425  -0.0214        -0.106 
##  8 child         2 -0.0700   0.392     6 0.160    0.0900        -0.230 
##  9 child         3 -0.151    0.101     6 0.0412  -0.110         -0.192 
## 10 child         4  0.000611 0.127     6 0.0520   0.0526        -0.0514
## 11 child         5 -0.328    0.475     6 0.194   -0.134         -0.522 
## 12 child         6 -0.0996   0.154     6 0.0630  -0.0366        -0.163</code></pre>
<pre class="r"><code>ggplot(data = space_norm,aes(x=block_num, y=rts))+
  geom_line(aes(color=age, linewidth=1))+
  geom_point()+
  geom_errorbar(aes(ymin=lower_limit, ymax=upper_limit), width=0.2)+
  labs(title=&quot;Normalized RTs&quot;)+
  xlab(&quot;Block number&quot;)+
  ylab(expression(atop(&quot;Suppression effect (%)&quot;, paste(&quot;(low prob. - high prob.)&quot;))))+
  theme(axis.text=element_text(size=30),
        axis.title=element_text(size=40,face=&quot;bold&quot;),
        title = element_text(size = 45),
        legend.text=element_text(size = 30))+
  guides(linewidth=&quot;none&quot;)</code></pre>
<p><img src="p08_files/figure-html/line_plot_avg-norm-1.png" width="2112" /></p>
<pre class="r"><code>#plot_grid(z,y,labels = c(&#39;A&#39;, &#39;B&#39;), label_size=40, ncol=1)</code></pre>
</div>
<div
id="correlation-of-suppression-effect-and-visual-working-memory-capacity"
class="section level3">
<h3>Correlation of suppression effect and visual working memory
capacity</h3>
<p>Create a df for the average suppression effect for each ppt and use
this code in a different portfolio.</p>
<pre class="r"><code>supp &lt;- space_block %&gt;%
  group_by(id)%&gt;%
  summarize(effect = mean(difference, na.rm = TRUE))

supp</code></pre>
<pre><code>## # A tibble: 33 × 2
##       id effect
##    &lt;dbl&gt;  &lt;dbl&gt;
##  1    14   95.2
##  2    15   99.7
##  3    16   65.3
##  4    18   51.7
##  5    19   50.3
##  6    20   43.6
##  7    21   83.5
##  8    22  123. 
##  9    23  -84.9
## 10    24  -76.6
## # … with 23 more rows</code></pre>
</div>
<div id="younger-children-analyses" class="section level3">
<h3>Younger children Analyses</h3>
<p>Now, let’s examine the partial data from children ages 6-7 years
old.</p>
<pre class="r"><code>space_block6 &lt;- trimmedC6 %&gt;%
  group_by(id, block_num, relative_hp_dist) %&gt;%
  summarize(rts = mean(rt),
            )</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;id&#39;, &#39;block_num&#39;. You can override using
## the `.groups` argument.</code></pre>
<pre class="r"><code>space_block6 &lt;- setDT(space_block6)
space_block6 &lt;- dcast(space_block6,id+block_num~relative_hp_dist,value.var=&#39;rts&#39;)</code></pre>
<pre class="r"><code>space_block6 &lt;- space_block6 %&gt;%
  mutate(low_prob = rowMeans(select(space_block6, c(lp_1,lp_2,lp_3)),na.rm=TRUE)) %&gt;%
  mutate(difference = (low_prob-high_prob))</code></pre>
<pre class="r"><code>ggplot(data = space_block6,aes(x=block_num, y=difference, group=id))+
  geom_line()+
  labs(title = &quot;Difference in Response Times&quot;, subtitle = &quot;for distractor presentation at the low-probability locations and high-probability location by block&quot;)+
  theme_classic()+
  labs(x = &quot;Block Number&quot;, y = &quot;Difference in RT (ms)&quot;)</code></pre>
<pre><code>## Warning: Removed 4 rows containing missing values (`geom_line()`).</code></pre>
<p><img src="p08_files/figure-html/line_plot-kids6-1.png" width="672" /></p>
<pre class="r"><code>spaceC &lt;- kids6 %&gt;%
  filter(trial_num&lt;120)%&gt;%
  group_by(id, relative_hp_dist) %&gt;%
  summarize(accs = mean(acc)
            )</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;id&#39;. You can override using the `.groups`
## argument.</code></pre>
<pre class="r"><code>spaceC</code></pre>
<pre><code>## # A tibble: 15 × 3
## # Groups:   id [3]
##       id relative_hp_dist  accs
##    &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;
##  1    27 absent           0.949
##  2    27 high_prob        0.625
##  3    27 lp_1             0.375
##  4    27 lp_2             0.75 
##  5    27 lp_3             0.5  
##  6    28 absent           0.883
##  7    28 high_prob        0.75 
##  8    28 lp_1             0.783
##  9    28 lp_2             0.8  
## 10    28 lp_3             0.5  
## 11    29 absent           1    
## 12    29 high_prob        1    
## 13    29 lp_1             0.891
## 14    29 lp_2             1    
## 15    29 lp_3             1</code></pre>
<p>Run ANOVA on 3 conditions first, and if significant, then run in on 5
conditions?</p>
<p>Need to reformat the above df to have a column for each
relative_hp_dist/ID so we can average across low-probability
locations.</p>
<pre class="r"><code>space_anovaC &lt;- setDT(spaceC)
space_anovaC &lt;- dcast(space_anovaC,id~relative_hp_dist,value.var=&#39;accs&#39;)</code></pre>
<pre class="r"><code>space_anovaC &lt;- space_anovaC %&gt;%
  mutate(low_prob = (lp_1+lp_2+lp_3)/3)</code></pre>
<p>Now, I want to create a smaller graph with just 3 bars: one for the
high-probability rts, average of low-probability rts, and no distractor.
Not enoguh data for RTs– look at accuracy.</p>
<pre class="r"><code>df_modC &lt;- subset(space_anovaC, select=c(id, high_prob, absent, low_prob))

df_modC &lt;- reshape2::melt(df_modC, id.var=c(&#39;id&#39;), variable.name= &quot;relative_hp_dist&quot;)

df_modC$value&lt;-df_modC$value*100</code></pre>
<pre class="r"><code>sum_statsC &lt;- df_modC%&gt;%
  group_by(relative_hp_dist)%&gt;%
  summarize(mean_rts=mean(value),
            sd_rt=sd(value),
            n_rt=n(),
            se=sd_rt/sqrt(n_rt),
            upper_limit=mean_rts+se,
            lower_limit=mean_rts-se
  )

sum_statsC</code></pre>
<pre><code>## # A tibble: 3 × 7
##   relative_hp_dist mean_rts sd_rt  n_rt    se upper_limit lower_limit
##   &lt;fct&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1 high_prob            79.2 19.1      3 11.0         90.2        68.1
## 2 absent               94.4  5.85     3  3.38        97.8        91.0
## 3 low_prob             73.3 21.4      3 12.3         85.7        61.0</code></pre>
<pre class="r"><code>sum_statsC$relative_hp_dist &lt;- factor(sum_statsC$relative_hp_dist,              # Change ordering manually
                  levels = c(&quot;high_prob&quot;, &quot;low_prob&quot;, &quot;absent&quot;))

f&lt;-ggplot(sum_statsC,aes(x = relative_hp_dist, y = mean_rts, fill=relative_hp_dist)) +
  geom_bar(stat = &quot;identity&quot;, show.legend = FALSE)+
  geom_errorbar(aes(ymin=lower_limit, ymax=upper_limit), width=0.2)+
  coord_cartesian(ylim = c(50,100))+
  theme_classic()+
  theme(axis.text=element_text(size=30),
        axis.title=element_text(size=40,face=&quot;bold&quot;),
        title = element_text(size = 45)) +
  labs(x = &quot;Distractor Location&quot;, y = &quot;Accuracy&quot;)+
  labs(title= &quot;Singleton Distractor Present&quot;)+
  scale_fill_brewer(palette=&quot;Dark2&quot;)+
  scale_x_discrete(labels= c(&quot;high_prob&quot;=&quot;HP loc&quot;,&quot;low_prob&quot;=&quot;LP loc&quot;,&quot;absent&quot;=&quot;Absent&quot;))</code></pre>
<pre class="r"><code>modelCd &lt;- aov_car(value ~ relative_hp_dist + Error(id/relative_hp_dist), data=df_modC)

modelCd</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: value
##             Effect         df    MSE    F  ges p.value
## 1 relative_hp_dist 1.00, 2.00 206.39 3.45 .294    .204
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1
## 
## Sphericity correction method: GG</code></pre>
<pre class="r"><code>spaceCt &lt;- kids6 %&gt;%
  filter(trial_num&lt;120, relative_hp_dist==&quot;absent&quot;)%&gt;%
  group_by(id, relative_target) %&gt;%
  summarize(accs = mean(acc)
            )</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;id&#39;. You can override using the `.groups`
## argument.</code></pre>
<pre class="r"><code>spaceCt</code></pre>
<pre><code>## # A tibble: 12 × 3
## # Groups:   id [3]
##       id relative_target  accs
##    &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
##  1    27 high_prob       0.889
##  2    27 lp_1            0.95 
##  3    27 lp_2            1    
##  4    27 lp_3            0.9  
##  5    28 high_prob       0.7  
##  6    28 lp_1            0.85 
##  7    28 lp_2            0.95 
##  8    28 lp_3            1    
##  9    29 high_prob       1    
## 10    29 lp_1            1    
## 11    29 lp_2            1    
## 12    29 lp_3            1</code></pre>
<pre class="r"><code>space_anovaCt &lt;- setDT(spaceCt)
space_anovaCt &lt;- dcast(space_anovaCt,id~relative_target,value.var=&#39;accs&#39;)</code></pre>
<pre class="r"><code>space_anovaCt &lt;- space_anovaCt %&gt;%
  mutate(low_prob = (lp_1+lp_2+lp_3)/3)</code></pre>
<p>Now, I want to create a smaller graph with just 3 bars: one for the
high-probability rts, average of low-probability rts, and no distractor.
Not enoguh data for RTs– look at accuracy.</p>
<pre class="r"><code>df_modCt &lt;- subset(space_anovaCt, select=c(id, high_prob,low_prob))

df_modCt &lt;- reshape2::melt(df_modCt, id.var=c(&#39;id&#39;), variable.name= &quot;relative_target&quot;)

df_modCt$value&lt;-df_modCt$value*100</code></pre>
<pre class="r"><code>sum_statsCt &lt;- df_modCt%&gt;%
  group_by(relative_target)%&gt;%
  summarize(mean_rts=mean(value),
            sd_rt=sd(value),
            n_rt=n(),
            se=sd_rt/sqrt(n_rt),
            upper_limit=mean_rts+se,
            lower_limit=mean_rts-se
  )

sum_statsCt</code></pre>
<pre><code>## # A tibble: 2 × 7
##   relative_target mean_rts sd_rt  n_rt    se upper_limit lower_limit
##   &lt;fct&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1 high_prob           86.3 15.2      3  8.76        95.1        77.5
## 2 low_prob            96.1  3.47     3  2.00        98.1        94.1</code></pre>
<pre class="r"><code>g&lt;-ggplot(sum_statsCt,aes(x = relative_target, y = mean_rts, fill=relative_target)) +
  geom_bar(stat = &quot;identity&quot;, show.legend = FALSE)+
  geom_errorbar(aes(ymin=lower_limit, ymax=upper_limit), width=0.2)+
  coord_cartesian(ylim = c(50,100))+
  theme_classic()+
  theme(axis.text=element_text(size=30),
        axis.title=element_text(size=40,face=&quot;bold&quot;),
        title = element_text(size = 45)) +
  labs(x = &quot;Target Location&quot;, y = &quot;Accuracy&quot;)+
  labs(title= &quot;Singleton Distractor Absent&quot;)+
  scale_fill_brewer(palette=&quot;Dark2&quot;)+
  scale_x_discrete(labels= c(&quot;high_prob&quot;=&quot;HP loc&quot;,&quot;low_prob&quot;=&quot;LP loc&quot;))

plot_grid(f,g,labels = c(&#39;A&#39;,&#39;B&#39;), label_size=40, ncol = 1)</code></pre>
<p><img src="p08_files/figure-html/plot-6t-1.png" width="2112" /></p>
<pre class="r"><code>modelCt &lt;- aov_car(value ~ relative_target + Error(id/relative_target), data=df_modCt)

modelCt</code></pre>
<pre><code>## Anova Table (Type 3 tests)
## 
## Response: value
##            Effect   df   MSE    F  ges p.value
## 1 relative_target 1, 2 73.20 1.97 .230    .295
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;+&#39; 0.1 &#39; &#39; 1</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
